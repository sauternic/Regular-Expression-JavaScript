<!DOCTYPE html>

<head>
    <title>RegExp</title>
    <meta charset="utf-8">
    <style>
        * {
            margin: 5px;
            padding: 5px;
        }

        body {
            background-color: bisque;
            font-size: 20px;
        }

        input {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 20px;
        }

        .verschieben {
            margin-left: 50px;
        }

        .greenBackground {
            background-color: rgb(10, 236, 59)
        }

        .redBackground {
            background-color: rgb(238, 130, 42)
        }


        #RegExpListe1,
        #RegExpDropDownListe1 {
            width: 500px;
            font-size: 20px;
        }

        #slider1 {
            width: 296px;
        }

        #divEingabe {
            background-color: rgb(228, 145, 235);
            max-width: 802px;
        }

        textarea {
            height: 800px;
            width: 800px;
            font-size: 15px;
        }

        #flag1 {
            width: 30px;

        }
    </style>
    <script>

        (function () {
            'use strict';
            //Events
            window.addEventListener('error', function (e) { alert('Meine Fehlermeldung!: ' + e.message); }, false);
            window.addEventListener('load', on_load, false);

            function on_load() {

                //Events
                window.addEventListener('keydown', on_keydown, false);
                slider1.addEventListener('input', on_input_S, false);
                slider1.addEventListener('change', on_input_S, false);
                start_button1.addEventListener('click', ausfuehren, false);
                textarea1.addEventListener('input', on_input, false);
                speichern_button1.addEventListener('click', speichern, false);

                if (window.localStorage)
                    textarea1.value = window.localStorage.getItem('text1');

                function on_input_S() {
                    textarea1.style.fontSize = slider1.value + 'px';
                    textarea2.style.fontSize = slider1.value + 'px';
                }
                function on_input(e) {
                    if (window.localStorage) {
                        if (textarea1.value === window.localStorage.getItem('text1')) {
                            speichern_button1.classList.remove("redBackground");
                            speichern_button1.classList.add("greenBackground");
                        } else {
                            speichern_button1.classList.remove("greenBackground");
                            speichern_button1.classList.add("redBackground");
                        }
                    }
                }
                function on_keydown(event) {
                    if (event.key === 'Enter')
                        ausfuehren();
                }
                function ausfuehren() {
                    var strArr, temp;

                    if (RegExpListe1.value)
                        strArr = textarea1.value.match(new RegExp(RegExpListe1.value, flag1.value));

                    //Ausgabe:
                    //Undefined mit '' überschreiben
                    temp = '';
                    for (var key in strArr) {
                        if (strArr.hasOwnProperty(key)) {
                            temp += strArr[key] + '\n';
                        }
                    }
                    textarea2.value = temp;
                }
                function speichern() {
                    if (window.localStorage) {
                        localStorage.setItem('text1', textarea1.value);
                        speichern_button1.classList.remove("redBackground");
                        speichern_button1.classList.add("greenBackground");
                    }
                }
            }
        })();

            //Abfrage Beispiele:
            //<(?!(tr|/tr)|(td|/td)|(tbody|/tbody)).*?>
    </script>
</head>

<body>
    <div id="divEingabe">
        <input type="button" id="start_button1" class="greenBackground" value="Matching">
        <span class="verschieben">RegExp:</span>
        <input type="text" id="RegExpListe1" value="<a href=.+?>" style="margin-left: 0px;">
        <br>&nbsp;Flags:
        <input type="text" id="flag1" value="g">
        <input type="button" id="speichern_button1" class="greenBackground" value="Speichern">
        <span class="verschieben">Schriftgrösse:</span>
        <input type="range" id="slider1" min="1" max="100" value="15">
    </div>

    <textarea wrap="off" id="textarea1"></textarea>
    <textarea wrap="off" id="textarea2"></textarea>
</body>

</html>